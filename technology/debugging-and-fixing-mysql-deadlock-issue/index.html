<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Debugging &amp; Fixing mysql deadlock issue &#8211; eLitmus Blog</title>
<meta name="description" content="We learn new things everyday, and we document our learnings here...">

<meta name="keywords" content="Mysql, deadlock, Index locks, Next Key Lock, ruby, Ruby on Rails, aasm">

<!-- Twitter Cards -->
  <meta name="twitter:card" content="summary">    
<meta name="twitter:title" content="Debugging &amp; Fixing mysql deadlock issue">
<meta name="twitter:description" content="<p>Recently, during one of our tests, we encountered a deadlock issue that was reported by Sentry. The deadlock occurred while attempting to insert scores into a table after completing a candidate’s test. We were initially unsure about the cause of this deadlock. Upon investigation, we discovered that it was due to the interplay of various locks in our MySQL database. In this blog post, we will deep dive into the nature of these locks, understand their impact on transactions, and present the solutions we implemented to mitigate deadlock occurrences.</p>

">
<meta name="twitter:site" content="@elitmus">

    

    

    

    

    

    

    

    

    

    

    

    

    
        
            <meta name="twitter:creator" content="@https://twitter.com/nick_bhtt">
        
    

    

    




<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:image" content="/blog/images/blog_logo_taglinedorange.png"/>
<meta property="og:type" content="article">
<meta property="og:title" content="Debugging &amp; Fixing mysql deadlock issue">
<meta property="og:description" content="<p>Recently, during one of our tests, we encountered a deadlock issue that was reported by Sentry. The deadlock occurred while attempting to insert scores into a table after completing a candidate’s test. We were initially unsure about the cause of this deadlock. Upon investigation, we discovered that it was due to the interplay of various locks in our MySQL database. In this blog post, we will deep dive into the nature of these locks, understand their impact on transactions, and present the solutions we implemented to mitigate deadlock occurrences.</p>

">
<meta property="og:url" content="/blog/technology/debugging-and-fixing-mysql-deadlock-issue/">

<meta property="og:site_name" content="eLitmus Blog">







<link rel="canonical" href="https://www.elitmus.com/blog/technology/debugging-and-fixing-mysql-deadlock-issue/">
<link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="eLitmus Blog Feed">


	<link rel="author" href="https://plus.google.com/+eLitmus?rel=author">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Icons -->
<!-- apple touch icons -->
<link rel="apple-touch-icon" sizes="57x57" href="/blog/images/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/blog/images/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/blog/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/blog/images/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/blog/images/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/blog/images/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/blog/images/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/blog/images/apple-touch-icon-152x152.png">
<!-- Favicons default 16x16 -->
<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/blog/favicon.ico">

<!-- Favicons others -->
<link rel="icon" type="image/png" href="/blog/images/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="/blog/images/favicon-160x160.png" sizes="160x160">
<link rel="icon" type="image/png" href="/blog/images/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/blog/images/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/blog/images/favicon-32x32.png" sizes="32x32">

<!-- Icons for Windows 8 Tiles -->
<meta name="msapplication-TileColor" content="#ffffff"/>
<meta name="msapplication-TileImage" content="/blog/images/mstile-144x144.png">

<!-- For all browsers -->


<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:600,300,300italic|The+Girl+Next+Door" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Source+Code+Pro:300' rel='stylesheet' type='text/css'>

<meta http-equiv="cleartype" content="on">

<!-- bootstrap 4 -->
<link rel="stylesheet" type="text/css" href="/blog/assets/css/bootstrap.min.css">

<!-- below css file is used for navbar in individual blogposts -->
<link rel="stylesheet" type="text/css" href="/blog/assets/css/main.min.css">

<!-- <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> -->

<!-- Optional theme -->
<link rel="stylesheet" type="text/css" href="/blog/assets/css/bootstrap-theme.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Font Awesome -->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="/blog/assets/css/font-elitmuslogo.css" />

<link rel="stylesheet" href="/blog/assets/css/customize.css">
<link rel="stylesheet" href="/blog/assets/css/forkit.css">
</head>

<body id="post">

  <header class="headroom">

  <nav class="navbar navbar-expand-md navbar-dark bg-black fixed-top" role="navigation">

      <a class="navbar-brand" href="/blog/">
        <img src="https://cdn0.elitmus.net/assets/elitmus-only-logo-6efc8a74032179afdb89829a093e05bd05d627dd4354bbd1ff7f4eb5db8a0af8.svg" class="img-logo">
        <span><div class="blog-label">blog</div></span>
      </a>

      <!-- the toggle button -->
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="navbar-toggler-icon"></span>
        <span class="sr-only">Toggle navigation</span><!-- only for screen readers -->
      </button>

      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav mr-auto">

          <!-- first item = dropdown search -->
          <li class="nav-item">
            <div class="dropdown search-box-margin">

            
              <div class="form-inline">
                 

                <input data-toggle="dropdown" placeholder="Search..." id="search-box" class="form-control form-control-sm search-input dropdown-toggle" aria-haspopup="true" aria-expanded="false">


                <div class="dropdown-menu" id="search-dropdown">
                  <a role='presentation' class='dropdown-item search-results'> Type more.... </a>
                </div>

              </div>



            <!-- the below line will pass "search word" to search.html -->

            <!--
            <form class="form-inline" action="/blog/search" method="get">
               


              <label for="search_box">Search</label>
              <input data-toggle="dropdown" type="text" name="query" placeholder="Search..." id="search-box" class="form-control form-control-sm search-input dropdown-toggle" aria-haspopup="true" aria-expanded="false">

              <div class="dropdown-menu" id="search-dropdown">
                  <a role='presentation' class='dropdown-item search-results'> Type more.... </a>
              </div>

              <input type="submit" value="search">

            </form>
            -->

            <!-- end of form -->


            </div>
          </li>
        </ul>

        

        <!-- every link on the right side -->
        <ul class="nav navbar-nav navbar-right nav-icon-size-reduce">
          
          <li class="nav-item">
             
              <a href="/blog/" class="nav-link">
                <i class="fa fa-home"></i> Home
              </a>
            
          </li>
          
          <li class="nav-item">
             
              <a href="/blog/posts/" class="nav-link">
                <i class="fa fa-file-text-o"></i> Posts
              </a>
            
          </li>
          
          <li class="nav-item">
             
              <a href="//www.elitmus.com/" class="nav-link">
                <i class="el el-elitmuslogo"></i> eLitmus
              </a>
            
          </li>
          

          <!-- feed is the last link -->
          <li class="nav-item">
            <a href="/blog/feed.xml" class="nav-link" title="Atom/RSS feed">
              <i class="fa fa-rss"></i> Feed
            </a>
          </li>
        </ul>



      </div> <!-- /.navbar-collapse -->

  </nav><!--[if lt IE 9]><div class="upgrade"><strong><a href="https://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
</header>
<!-- 

  <div class="search-wrapper">
    <div class="search-form">
      <input type="text" class="search-field" placeholder="Search...">
      <i class="icon-remove-sign icon-2x"></i>
      <ul class="search-results post-list"></ul> -->
<!-- /.search-results -->
<!-- </div> -->
<!-- /.search-form -->
<!-- </div> -->
<!-- ./search-wrapper -->
<!--  -->

  

  <div class="container-fluid">

  <div class="row">


    <div class="col-md-2"></div>
      <div class="col-md-8">
        

        <div id="main" role="main" class="marginal">
          <article class="entry">

            

            <div>
              <header>
                <span class="entry-tags">
                  
                    <a href="/blog/tags/#Mysql" title="Pages tagged Mysql">Mysql</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#deadlock" title="Pages tagged deadlock">deadlock</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#Index locks" title="Pages tagged Index locks">Index locks</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#Next Key Lock" title="Pages tagged Next Key Lock">Next Key Lock</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#ruby" title="Pages tagged ruby">ruby</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#Ruby on Rails" title="Pages tagged Ruby on Rails">Ruby on Rails</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#aasm" title="Pages tagged aasm">aasm</a>
                    
                  

                  <div class=' social-sharing pull-right'>        
     
</div>

                </span>
              
                
                  <h1 class="no-padding">Debugging &amp; Fixing mysql deadlock issue</h1>
                
              </header>
            </div>
           
            <div>
              <div>
                <span class='badge badge-warning'> <a href="/blog/categories/technology/index.html" > technology </a></span>
              </div>

              

              <div class="post-content-justify">
                <p>Recently, during one of our tests, we encountered a deadlock issue that was reported by Sentry. The deadlock occurred while attempting to insert scores into a table after completing a candidate’s test. We were initially unsure about the cause of this deadlock. Upon investigation, we discovered that it was due to the interplay of various locks in our MySQL database. In this blog post, we will deep dive into the nature of these locks, understand their impact on transactions, and present the solutions we implemented to mitigate deadlock occurrences.</p>

<h4 id="understanding-deadlocks"><strong>Understanding deadlocks</strong></h4>
<p>To understand the deadlock situation, let’s familiarize ourselves with the different types of locks involved, as defined by the official MySQL documentation:</p>

<p><strong>GAP Lock:</strong></p>

<p>A gap lock is a lock on a gap between index records, or a lock on the gap before the first or after the last index record. A gap might span a single index value, multiple index values, or even be empty.</p>

<p><em>If id is not indexed or has a nonunique index, the statement does lock the preceding gap.</em></p>

<p><strong>Next Key Lock:</strong></p>

<p>A next-key lock is a combination of a record lock on the index record and a gap lock on the gap before the index record. in simple words If one session has a shared or exclusive lock on record R in an index, another session cannot insert a new index record in the gap immediately before R in the index order.</p>

<p><strong>Insert Intention Lock:</strong></p>

<p>An insert intention lock is a type of gap lock set by INSERT operations prior to row insertion. This lock signals the intent to insert in such a way that multiple transactions inserting into the same index gap need not wait for each other if they are not inserting at the same position within the gap.</p>

<h4 id="problem-scenario"><strong>Problem Scenario</strong></h4>
<p>In our case, we have two tables, table1 and table2, with a has_many relationship. All operations are performed on table2, which has an index on table1 as a foreign key.</p>

<p><strong>Transaction A</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>BEGIN<span class="p">;</span>
DELETE FROM table2 WHERE table2.table1_id<span class="o">=</span><span class="m">127</span><span class="p">;</span>
Query OK, <span class="m">1</span> row affected <span class="o">(</span><span class="m">0</span>.00 sec<span class="o">)</span></code></pre></figure>

<p>Resulting data locks</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>mysql&gt; SELECT INDEX_NAME, LOCK_TYPE,LOCK_DATA,LOCK_MODE,LOCK_STATUS, EVENT_ID FROM performance_schema.data_locks<span class="p">;</span>
+-----------------------------------------+-----------+-----------+---------------+-------------+----------+
<span class="p">|</span> INDEX_NAME                <span class="p">|</span> LOCK_TYPE <span class="p">|</span> LOCK_DATA <span class="p">|</span> LOCK_MODE     <span class="p">|</span> LOCK_STATUS <span class="p">|</span> EVENT_ID <span class="p">|</span>
+-----------------------------------------+-----------+-----------+---------------+-------------+----------+
<span class="p">|</span> NULL                      <span class="p">|</span> TABLE     <span class="p">|</span> NULL      <span class="p">|</span> IX            <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
<span class="p">|</span> index_table2_on_table1_id <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">127</span>, <span class="m">92</span>   <span class="p">|</span> X             <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
<span class="p">|</span> PRIMARY                   <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">92</span>        <span class="p">|</span> X,REC_NOT_GAP <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
<span class="p">|</span> index_table2_on_table1_id <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">128</span>, <span class="m">93</span>   <span class="p">|</span> X,GAP         <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
+-----------------------------------------+-----------+-----------+---------------+-------------+----------+
<span class="m">4</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.00 sec<span class="o">)</span></code></pre></figure>

<p>This query acquires a gap lock on table2 and an insert intention lock on table1_id values 126 and 127.</p>

<p><strong>Transaction B</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>BEGIN<span class="p">;</span>
INSERT INTO table2<span class="o">(</span>table1_id<span class="o">)</span> VALUES<span class="o">(</span><span class="m">126</span><span class="o">)</span><span class="p">;</span>
ERROR <span class="m">1205</span> <span class="o">(</span>HY000<span class="o">)</span>: Lock <span class="nb">wait</span> timeout exceeded<span class="p">;</span> try restarting transaction</code></pre></figure>

<p>Resulting data locks</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>mysql&gt; SELECT INDEX_NAME,LOCK_TYPE,LOCK_DATA,LOCK_MODE,LOCK_STATUS, EVENT_ID FROM performance_schema.data_locks<span class="p">;</span>
+-----------------------------------------+-----------+-----------+------------------------+-------------+----------+
<span class="p">|</span> INDEX_NAME                  <span class="p">|</span> LOCK_TYPE <span class="p">|</span> LOCK_DATA <span class="p">|</span> LOCK_MODE              <span class="p">|</span> LOCK_STATUS <span class="p">|</span> EVENT_ID <span class="p">|</span>
+-----------------------------------------+-----------+-----------+------------------------+-------------+----------+
<span class="p">|</span> NULL                        <span class="p">|</span> TABLE     <span class="p">|</span> NULL      <span class="p">|</span> IX                     <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">351</span> <span class="p">|</span>
<span class="p">|</span> index_table2_on_table1_id   <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">127</span>, <span class="m">92</span>   <span class="p">|</span> X,GAP,INSERT_INTENTION <span class="p">|</span> WAITING     <span class="p">|</span>      <span class="m">351</span> <span class="p">|</span>
<span class="p">|</span> NULL                        <span class="p">|</span> TABLE     <span class="p">|</span> NULL      <span class="p">|</span> IX                     <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
<span class="p">|</span> index_table2_on_table1_id   <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">127</span>, <span class="m">92</span>   <span class="p">|</span> X                      <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
<span class="p">|</span> PRIMARY                     <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">92</span>        <span class="p">|</span> X,REC_NOT_GAP          <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
<span class="p">|</span> index_table2_on_table1_id   <span class="p">|</span> RECORD    <span class="p">|</span> <span class="m">128</span>, <span class="m">93</span>   <span class="p">|</span> X,GAP                  <span class="p">|</span> GRANTED     <span class="p">|</span>      <span class="m">408</span> <span class="p">|</span>
+-----------------------------------------+-----------+-----------+------------------------+-------------+----------+
<span class="m">6</span> rows <span class="k">in</span> <span class="nb">set</span> <span class="o">(</span><span class="m">0</span>.01 sec<span class="o">)</span></code></pre></figure>

<p>As Transaction A holds the lock on table1_id 126 due to the gap lock, Transaction B waits for the lock. However, it eventually times out, resulting in a lock wait timeout error.</p>

<p>To create a deadlock, one must perform a delete query in Transaction B. Then, when attempting to insert a record in Transaction A, a deadlock error is thrown, with Transaction B becoming the victim. <strong>This deadlock situation arises due to the conflicts in the next-key lock, preventing Transaction B from inserting the record.</strong></p>

<h4 id="in-a-nutshell"><strong>In a nutshell</strong></h4>
<p>Lets understood the above queries in nutshell to create a deadlock.</p>
<ul>
  <li>Transaction A -&gt; BEGIN;</li>
  <li>Transaction A -&gt; DELETE records on table2 with table1_id=x.</li>
  <li>Transaction B -&gt; BEGIN;</li>
  <li>Transaction B -&gt; DELETE record on table2 with table1_id=y;</li>
  <li>Transaction B -&gt; INSERT a record on table2 and table1_id is x-1.</li>
  <li>Transaction A -&gt; INSERT a record on table2 and table1_id is y-1.</li>
  <li>A deadlock occurs, with Transaction A being the victim.</li>
</ul>

<h4 id="practical-example-of-gap-lock--next-key-lock"><strong>Practical example of GAP lock &amp; Next Key Lock.</strong></h4>
<p>Gap lock is basically on range of values &amp; will be aquired on a range if we try to delete a record which does not exist.</p>

<p><strong>table1</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>+----+
<span class="p">|</span> id <span class="p">|</span>
+----+
<span class="p">|</span> <span class="m">73</span> <span class="p">|</span>
<span class="p">|</span> <span class="m">74</span> <span class="p">|</span>
<span class="p">|</span> <span class="m">81</span> <span class="p">|</span>
<span class="p">|</span> <span class="m">82</span> <span class="p">|</span>
+----+</code></pre></figure>

<p><strong>table2</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>+-----+-----------+
<span class="p">|</span> id  <span class="p">|</span> table1_id <span class="p">|</span>
+-----+-----------+
<span class="p">|</span> <span class="m">1</span>   <span class="p">|</span> <span class="m">73</span>        <span class="p">|</span> 
<span class="p">|</span> <span class="m">2</span>   <span class="p">|</span> <span class="m">82</span>        <span class="p">|</span>
+-----+-----------+</code></pre></figure>

<p><strong>Transaction A</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>BEGIN<span class="p">;</span>
DELETE from table2 where <span class="nv">table1_id</span><span class="o">=</span><span class="m">75</span><span class="p">;</span>
Query OK, <span class="m">0</span> rows affected <span class="o">(</span><span class="m">0</span>.00 sec<span class="o">)</span></code></pre></figure>

<p>This transaction will aquire a gap lock on range from 74-80.
this means if we try to insert new values in table2(in another session) with table1_id ranging from 74-80 it will wait until delete transaction commits.</p>

<h4 id="other-issues"><strong>Other issues</strong></h4>
<p>In addition to addressing the deadlock issues caused by gap locks, we also encountered problems related to AASM records. We were using the AASM gem, a library that manages state transitions. In our case, this library was responsible for changing the state of the test to “completed” and executing several callback functions. These operations were performed as part of a single transaction, which sometimes resulted in prolonged transaction durations and increased the likelihood of deadlocks.</p>

<p><strong>Model dummy code</strong></p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span>aasm <span class="k">do</span>
  state :active, initial: <span class="nb">true</span>
  state :complete
  event :complete, after: <span class="o">[</span>:method1, :method2, :method3<span class="o">]</span> <span class="k">do</span>
      transitions from: :active, to: :complete
  end
end</code></pre></figure>

<p>When the test is marked as complete and the state changes, all the MySQL-related queries are executed as part of a single transaction.</p>

<p>Due to the execution of all these methods within a single transaction, there were instances where the transaction took a considerable amount of time to complete. These prolonged transactions duration increased the risk of deadlocks occurrence and also resulted in issues related to lock wait time.</p>

<h4 id="fix"><strong>FIX</strong></h4>

<ol>
  <li>To fix this we moved the insertion of records as a separate transaction out of the aasm state change.</li>
  <li>Optimized transaction size: We optimized the other badly written queries in the transaction.</li>
  <li>Reduced transaction duration: Only limited number of queries were part of the state change transaction (to keep the transaction short).</li>
  <li>We further optimized the GAP lock by avoiding unnecessary delete queries when the records were not present in the table with the corresponding ID.</li>
</ol>

<h4 id="references"><strong>References</strong></h4>
<ol>
  <li><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-locking.html#innodb-gap-locks" target="_blank" style="color: blue;">Innodb Gap Lock</a></li>
  <li><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-locking.html#innodb-next-key-locks" target="_blank" style="color: blue;">Innodb Next Key Lock</a></li>
  <li><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-locking.html#innodb-insert-intention-locks" target="_blank" style="color: blue;">Innodb Insert Intention Lock</a></li>
  <li><a href="https://medium.com/@tanishiking/avoid-deadlock-caused-by-a-conflict-of-transactions-that-accidentally-acquire-gap-lock-in-innodb-a114e975fd72" target="_blank" style="color: blue;">Gap lock with example medium article</a></li>
  <li><a href="https://www.percona.com/blog/innodbs-gap-lock" target="_blank" style="color: blue;">Gap lock article by percona</a></li>
</ol>

              </div>
              <div class="entry-tags">
                <div class=' social-sharing pull-right'>        
     
</div>
              </div>
              <div class="clearfix"><br/></div>

                <div class="panel panel-default">

  

  

  

  

  

  

  

  

  

  

  

  

  
    
      <div class="panel-body">
        <div class="container-fluid">

          <div class="row">
            <div class="col-sm-12 col-md-4">
              <center>
                <img src="/blog/images/nikhil.jpg" alt="Nikhil Bhatt photo" class="author-photo img-circle img-responsive"/>
                
                <span class="author vcard">
                  <span class="fn">Nikhil Bhatt</span>
                </span>

                <div class="nav-icon-size-reduce social-icons">
                  
                    <a href="https://twitter.com/https://twitter.com/nick_bhtt"  title="Nikhil Bhatt on Twitter"  target="_blank"><i class="fa fa-twitter "></i></a>
                  
                  
                  
                  

                  
                    <a href="https://linkedin.com/in/nik-bhatt" title="Nikhil Bhatt on LinkedIn" target="_blank"><i class="fa fa-linkedin "></i></a>
                  

                  

                  

                  

                  
                    <a href="https://github.com/nikhilbhatt" title="Nikhil Bhatt on Github" target="_blank"><i class="fa fa-github "></i></a>
                  

                     
                </div><!-- /.social-icons -->
              </center>
            </div>

            <div class="col-sm-12 col-md-8">
              
                <span class="author-bio">Nikhil Bhatt is a member of Technology at eLitmus. He enjoys creating small, practical software applications and is enthusiastic about competitive coding and chess</span>
              
            </div>

          </div>

        </div>
      </div>

  

  

  

</div>
                <div id='discourse-comments'></div>

<script type="text/javascript">
  DiscourseEmbed = { discourseUrl: 'https://adda.elitmus.com/',
                     discourseEmbedUrl: 'https://www.elitmus.com/blog/technology/debugging-and-fixing-mysql-deadlock-issue/'
                   };

  (function() {
    var d = document.createElement('script'); 
    d.type = 'text/javascript'; 
    d.async = true;
    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
  })();
</script>


                
              </div><!-- /.entry-content -->
            </div><!-- /.entry-wrapper -->

          </article>

          <nav class="navbar nav-justified" role="navigation">
            <ul class="nav pager">
              
                <li class="previous showElem mr-auto"><a href="/blog/technology/website-monitor-using-google-app-script/" title="Website Monitor Using Google App Script">&larr;<span class="showPrevNex"> Previous </span> </a></li>
              
              
                <li class="next showElem ml-auto"><a href="/blog/technology/resume-parsing-insights-and-steps-to-create-your-own-parser/" title="Resume Parsing: Insights and Steps to Create Your Own Parser"> <span class='showPrevNex'> Next </span> &rarr; </a></li>
              
            </ul>
          </nav>
        
        </div><!-- /#main -->

      <!--/col-md-2 -->
      <div class="col-md-2">

      </div>

    </div><!-- /row -->
    </div>
    <div class="footer-color">
      <footer role="contentinfo">
        <center>
            <span class='footer-text'>
    &copy;  2005-<script> document.write(new Date().getFullYear()) </script>, eLitmus.com. | <a href="/terms_of_use/">Terms of Use</a> &middot; <a href="/privacy_policy/">Privacy Policy</a>

  </span>
        </center>
      </footer>
    </div><!-- /.footer-wrapper -->
    

	<script async src="https://www.googletagmanager.com/gtag/js?id=G-CB7H9KN61P"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-CB7H9KN61P');
	</script>



<!-- Load Modernizr -->
<script src="/blog/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- adding jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- end of jquery -->

<script src="/blog/assets/js/scripts.min.js"></script>
<script src="/blog/assets/js/lunr.min.js"></script>
<script src="/blog/assets/js/lunr-search.js"></script>
<script src="/blog/assets/js/plugins/headroom.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="/blog/assets/js/vendor/forkit.js"></script>
  

  </body>
</html>
