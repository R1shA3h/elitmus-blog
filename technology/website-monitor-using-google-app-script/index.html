<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Website Monitor Using Google App Script &#8211; eLitmus Blog</title>
<meta name="description" content="We learn new things everyday, and we document our learnings here...">

<meta name="keywords" content="google-app-script, uptime-monitor, website-status, upptime">

<!-- Twitter Cards -->
  <meta name="twitter:card" content="summary">    
<meta name="twitter:title" content="Website Monitor Using Google App Script">
<meta name="twitter:description" content="<p>Recently, I was looking for a solution to notify me when a website is down and when it is back up. I found a few solutions, but they all had a learning curve. So I thought of an alternative solution using Google App Script, which I had recently learned about.</p>

">
<meta name="twitter:site" content="@elitmus">

    

    

    

    

    

    

    

    

    

    

    

    

    
        
            <meta name="twitter:creator" content="@https://twitter.com/nick_bhtt">
        
    

    

    




<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:image" content="/blog/images/blog_logo_taglinedorange.png"/>
<meta property="og:type" content="article">
<meta property="og:title" content="Website Monitor Using Google App Script">
<meta property="og:description" content="<p>Recently, I was looking for a solution to notify me when a website is down and when it is back up. I found a few solutions, but they all had a learning curve. So I thought of an alternative solution using Google App Script, which I had recently learned about.</p>

">
<meta property="og:url" content="/blog/technology/website-monitor-using-google-app-script/">

<meta property="og:site_name" content="eLitmus Blog">







<link rel="canonical" href="https://www.elitmus.com/blog/technology/website-monitor-using-google-app-script/">
<link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="eLitmus Blog Feed">


	<link rel="author" href="https://plus.google.com/+eLitmus?rel=author">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Icons -->
<!-- apple touch icons -->
<link rel="apple-touch-icon" sizes="57x57" href="/blog/images/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/blog/images/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/blog/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/blog/images/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/blog/images/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/blog/images/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/blog/images/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/blog/images/apple-touch-icon-152x152.png">
<!-- Favicons default 16x16 -->
<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/blog/favicon.ico">

<!-- Favicons others -->
<link rel="icon" type="image/png" href="/blog/images/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="/blog/images/favicon-160x160.png" sizes="160x160">
<link rel="icon" type="image/png" href="/blog/images/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/blog/images/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/blog/images/favicon-32x32.png" sizes="32x32">

<!-- Icons for Windows 8 Tiles -->
<meta name="msapplication-TileColor" content="#ffffff"/>
<meta name="msapplication-TileImage" content="/blog/images/mstile-144x144.png">

<!-- For all browsers -->


<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:600,300,300italic|The+Girl+Next+Door" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Source+Code+Pro:300' rel='stylesheet' type='text/css'>

<meta http-equiv="cleartype" content="on">

<!-- bootstrap 4 -->
<link rel="stylesheet" type="text/css" href="/blog/assets/css/bootstrap.min.css">

<!-- below css file is used for navbar in individual blogposts -->
<link rel="stylesheet" type="text/css" href="/blog/assets/css/main.min.css">

<!-- <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> -->

<!-- Optional theme -->
<link rel="stylesheet" type="text/css" href="/blog/assets/css/bootstrap-theme.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Font Awesome -->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="/blog/assets/css/font-elitmuslogo.css" />

<link rel="stylesheet" href="/blog/assets/css/customize.css">
<link rel="stylesheet" href="/blog/assets/css/forkit.css">
</head>

<body id="post">

  <header class="headroom">

  <nav class="navbar navbar-expand-md navbar-dark bg-black fixed-top" role="navigation">

      <a class="navbar-brand" href="/blog/">
        <img src="https://cdn0.elitmus.net/assets/elitmus-only-logo-6efc8a74032179afdb89829a093e05bd05d627dd4354bbd1ff7f4eb5db8a0af8.svg" class="img-logo">
        <span><div class="blog-label">blog</div></span>
      </a>

      <!-- the toggle button -->
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="navbar-toggler-icon"></span>
        <span class="sr-only">Toggle navigation</span><!-- only for screen readers -->
      </button>

      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav mr-auto">

          <!-- first item = dropdown search -->
          <li class="nav-item">
            <div class="dropdown search-box-margin">

            
              <div class="form-inline">
                 

                <input data-toggle="dropdown" placeholder="Search..." id="search-box" class="form-control form-control-sm search-input dropdown-toggle" aria-haspopup="true" aria-expanded="false">


                <div class="dropdown-menu" id="search-dropdown">
                  <a role='presentation' class='dropdown-item search-results'> Type more.... </a>
                </div>

              </div>



            <!-- the below line will pass "search word" to search.html -->

            <!--
            <form class="form-inline" action="/blog/search" method="get">
               


              <label for="search_box">Search</label>
              <input data-toggle="dropdown" type="text" name="query" placeholder="Search..." id="search-box" class="form-control form-control-sm search-input dropdown-toggle" aria-haspopup="true" aria-expanded="false">

              <div class="dropdown-menu" id="search-dropdown">
                  <a role='presentation' class='dropdown-item search-results'> Type more.... </a>
              </div>

              <input type="submit" value="search">

            </form>
            -->

            <!-- end of form -->


            </div>
          </li>
        </ul>

        

        <!-- every link on the right side -->
        <ul class="nav navbar-nav navbar-right nav-icon-size-reduce">
          
          <li class="nav-item">
             
              <a href="/blog/" class="nav-link">
                <i class="fa fa-home"></i> Home
              </a>
            
          </li>
          
          <li class="nav-item">
             
              <a href="/blog/posts/" class="nav-link">
                <i class="fa fa-file-text-o"></i> Posts
              </a>
            
          </li>
          
          <li class="nav-item">
             
              <a href="//www.elitmus.com/" class="nav-link">
                <i class="el el-elitmuslogo"></i> eLitmus
              </a>
            
          </li>
          

          <!-- feed is the last link -->
          <li class="nav-item">
            <a href="/blog/feed.xml" class="nav-link" title="Atom/RSS feed">
              <i class="fa fa-rss"></i> Feed
            </a>
          </li>
        </ul>



      </div> <!-- /.navbar-collapse -->

  </nav><!--[if lt IE 9]><div class="upgrade"><strong><a href="https://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
</header>
<!-- 

  <div class="search-wrapper">
    <div class="search-form">
      <input type="text" class="search-field" placeholder="Search...">
      <i class="icon-remove-sign icon-2x"></i>
      <ul class="search-results post-list"></ul> -->
<!-- /.search-results -->
<!-- </div> -->
<!-- /.search-form -->
<!-- </div> -->
<!-- ./search-wrapper -->
<!--  -->

  

  <div class="container-fluid">

  <div class="row">


    <div class="col-md-2"></div>
      <div class="col-md-8">
        

        <div id="main" role="main" class="marginal">
          <article class="entry">

            

            <div>
              <header>
                <span class="entry-tags">
                  
                    <a href="/blog/tags/#google-app-script" title="Pages tagged google-app-script">google-app-script</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#uptime-monitor" title="Pages tagged uptime-monitor">uptime-monitor</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#website-status" title="Pages tagged website-status">website-status</a>
                    &nbsp;&bull;&nbsp;
                  
                    <a href="/blog/tags/#upptime" title="Pages tagged upptime">upptime</a>
                    
                  

                  <div class=' social-sharing pull-right'>        
     
</div>

                </span>
              
                
                  <h1 class="no-padding">Website Monitor Using Google App Script</h1>
                
              </header>
            </div>
           
            <div>
              <div>
                <span class='badge badge-warning'> <a href="/blog/categories/technology/index.html" > technology </a></span>
              </div>

              

              <div class="post-content-justify">
                <p>Recently, I was looking for a solution to notify me when a website is down and when it is back up. I found a few solutions, but they all had a learning curve. So I thought of an alternative solution using Google App Script, which I had recently learned about.</p>

<p><strong>Requirements</strong></p>
<ul>
  <li>Can run every 5 minutes.</li>
  <li>Can send emails when the website is down.</li>
  <li>Trustworthy.</li>
</ul>

<p>I wasn’t sure if the first requirement was possible with Google App Script, but the other two were. After reading the documentation, I found that it was possible to create a time-based trigger for a script.</p>

<p><strong>Steps to follow:</strong></p>
<ul>
  <li>Create a new Google App Script project.</li>
  <li>Create a function to track the website. Here is an example:</li>
</ul>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span></span><span class="k">function</span> myFunction<span class="o">()</span> <span class="o">{</span>
   const <span class="nv">initialUrls</span> <span class="o">=</span> <span class="o">[</span>
     <span class="o">{</span> uri: <span class="s1">&#39;https://mock.codes/200&#39;</span>, status: <span class="s1">&#39;&#39;</span><span class="o">}</span>,
     <span class="o">{</span> uri: <span class="s1">&#39;https://mock.codes/500&#39;</span>, status: <span class="s1">&#39;&#39;</span><span class="o">}</span>
   <span class="o">]</span><span class="p">;</span>
 
 const <span class="nv">properties</span> <span class="o">=</span> PropertiesService.getScriptProperties<span class="o">()</span><span class="p">;</span>
 <span class="nb">let</span> <span class="nv">urls</span> <span class="o">=</span>  JSON.parse<span class="o">(</span>properties.getProperty<span class="o">(</span><span class="s1">&#39;URL_LIST&#39;</span><span class="o">))</span> <span class="o">||</span> initialUrls<span class="p">;</span>
 const <span class="nv">errorResponseCodes</span> <span class="o">=</span> <span class="o">[</span><span class="m">500</span>, <span class="m">502</span>, <span class="m">503</span>, <span class="m">504</span><span class="o">]</span><span class="p">;</span>
 const <span class="nv">alertEmail</span> <span class="o">=</span> <span class="s1">&#39;alertmail@gmail.com&#39;</span><span class="p">;</span>
 
 const <span class="nv">options</span> <span class="o">=</span> <span class="o">{</span> muteHttpExceptions: <span class="nb">true</span> <span class="o">}</span><span class="p">;</span>
 
 urls.forEach<span class="o">((</span>url<span class="o">)</span> <span class="o">=</span>&gt; <span class="o">{</span>
   <span class="nb">let</span> <span class="nv">responseCode</span> <span class="o">=</span> UrlFetchApp.fetch<span class="o">(</span>url.uri, options<span class="o">)</span>.getResponseCode<span class="o">()</span><span class="p">;</span>
 
   const <span class="nv">isErrorResponse</span> <span class="o">=</span> errorResponseCodes.includes<span class="o">(</span>responseCode<span class="o">)</span><span class="p">;</span>
   const <span class="nv">wasPreviouslyDown</span> <span class="o">=</span> url.status <span class="o">===</span> <span class="s1">&#39;down&#39;</span><span class="p">;</span>

   <span class="k">if</span> <span class="o">(</span>isErrorResponse <span class="o">&amp;&amp;</span> !wasPreviouslyDown<span class="o">)</span> <span class="o">{</span>
     // Site is now down <span class="k">for</span> the first <span class="nb">time</span>
     const <span class="nv">subject</span> <span class="o">=</span> <span class="sb">`</span>Alert: Your site <span class="si">${</span><span class="nv">url</span><span class="p">.uri</span><span class="si">}</span> is currently down<span class="sb">`</span><span class="p">;</span>
     const <span class="nv">body</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nv">url</span><span class="p">.uri</span><span class="si">}</span> has encountered an error with status code <span class="si">${</span><span class="nv">responseCode</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
     MailApp.sendEmail<span class="o">(</span>alertEmail, subject, body<span class="o">)</span><span class="p">;</span>
     url.status <span class="o">=</span> <span class="s1">&#39;down&#39;</span><span class="p">;</span>
   <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span>!isErrorResponse <span class="o">&amp;&amp;</span> wasPreviouslyDown<span class="o">)</span> <span class="o">{</span>
     // Site was previously down, but is now back up
     const <span class="nv">subject</span> <span class="o">=</span> <span class="sb">`</span>Your site <span class="si">${</span><span class="nv">url</span><span class="p">.uri</span><span class="si">}</span> is now back up<span class="sb">`</span><span class="p">;</span>
     const <span class="nv">body</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nv">url</span><span class="p">.uri</span><span class="si">}</span> has recovered and is now back up<span class="sb">`</span><span class="p">;</span>
     MailApp.sendEmail<span class="o">(</span>alertEmail, subject, body<span class="o">)</span><span class="p">;</span>
     url.status <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
   <span class="o">}</span>
 <span class="o">})</span><span class="p">;</span>

 properties.setProperty<span class="o">(</span><span class="s1">&#39;URL_LIST&#39;</span>, JSON.stringify<span class="o">(</span>urls<span class="o">))</span><span class="p">;</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>Go to the “Triggers” menu in the left sidebar of the Google App Script project.</li>
  <li>Click the “Add Trigger” button and select the function to run.</li>
  <li>Choose the options to run the trigger every 5 minutes and click “Save”</li>
</ul>

<p><strong>Explanation</strong></p>

<p>This above code uses the UrlFetchApp service to make HTTP requests to the websites and check their status. it stores the value of each trigger in a variable so that whenver site goes live again it can send email of website backed up.</p>

<blockquote>
  <p>You can also check the logs for each trigger execution in the “Execution” menu on the left side of the project.</p>
</blockquote>

<p><img src="/blog/images/website-monitor/email.jpg" alt="Email Sample" /></p>

<p><strong>Conclusion</strong></p>

<p>In conclusion, Google App Script is a useful tool for creating a customized website tracker that can notify the user when a website is down. The process of setting up the tracker is straightforward and the logs can be easily accessed to track the execution of the function. this basic functionality can be enhanced more to record the status in a csv file. also interesting graphs and charts can be made using that data.</p>

<p><strong>Additional investigations</strong></p>

<p><a href="https://github.com/upptime/upptime" target="_blank" style="color: blue;">Upptime</a> is one of the good open-source alternative which can be used to monitor a website. it uses github actions to make sure the website is up and creates a issue if website is down for some reason. it also logs the information about the website speed.</p>

              </div>
              <div class="entry-tags">
                <div class=' social-sharing pull-right'>        
     
</div>
              </div>
              <div class="clearfix"><br/></div>

                <div class="panel panel-default">

  

  

  

  

  

  

  

  

  

  

  

  

  
    
      <div class="panel-body">
        <div class="container-fluid">

          <div class="row">
            <div class="col-sm-12 col-md-4">
              <center>
                <img src="/blog/images/nikhil.jpg" alt="Nikhil Bhatt photo" class="author-photo img-circle img-responsive"/>
                
                <span class="author vcard">
                  <span class="fn">Nikhil Bhatt</span>
                </span>

                <div class="nav-icon-size-reduce social-icons">
                  
                    <a href="https://twitter.com/https://twitter.com/nick_bhtt"  title="Nikhil Bhatt on Twitter"  target="_blank"><i class="fa fa-twitter "></i></a>
                  
                  
                  
                  

                  
                    <a href="https://linkedin.com/in/nik-bhatt" title="Nikhil Bhatt on LinkedIn" target="_blank"><i class="fa fa-linkedin "></i></a>
                  

                  

                  

                  

                  
                    <a href="https://github.com/nikhilbhatt" title="Nikhil Bhatt on Github" target="_blank"><i class="fa fa-github "></i></a>
                  

                     
                </div><!-- /.social-icons -->
              </center>
            </div>

            <div class="col-sm-12 col-md-8">
              
                <span class="author-bio">Nikhil Bhatt is a member of Technology at eLitmus. He enjoys creating small, practical software applications and is enthusiastic about competitive coding and chess</span>
              
            </div>

          </div>

        </div>
      </div>

  

  

  

</div>
                <div id='discourse-comments'></div>

<script type="text/javascript">
  DiscourseEmbed = { discourseUrl: 'https://adda.elitmus.com/',
                     discourseEmbedUrl: 'https://www.elitmus.com/blog/technology/website-monitor-using-google-app-script/'
                   };

  (function() {
    var d = document.createElement('script'); 
    d.type = 'text/javascript'; 
    d.async = true;
    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
  })();
</script>


                
              </div><!-- /.entry-content -->
            </div><!-- /.entry-wrapper -->

          </article>

          <nav class="navbar nav-justified" role="navigation">
            <ul class="nav pager">
              
                <li class="previous showElem mr-auto"><a href="/blog/technology/the-revamp-of-a-video-proctoring-solution-a-behind-the-scenes-look/" title="The revamp of a Video Proctoring Solution: A Behind-the-Scenes Look">&larr;<span class="showPrevNex"> Previous </span> </a></li>
              
              
                <li class="next showElem ml-auto"><a href="/blog/technology/debugging-and-fixing-mysql-deadlock-issue/" title="Debugging &amp; Fixing mysql deadlock issue"> <span class='showPrevNex'> Next </span> &rarr; </a></li>
              
            </ul>
          </nav>
        
        </div><!-- /#main -->

      <!--/col-md-2 -->
      <div class="col-md-2">

      </div>

    </div><!-- /row -->
    </div>
    <div class="footer-color">
      <footer role="contentinfo">
        <center>
            <span class='footer-text'>
    &copy;  2005-<script> document.write(new Date().getFullYear()) </script>, eLitmus.com. | <a href="/terms_of_use/">Terms of Use</a> &middot; <a href="/privacy_policy/">Privacy Policy</a>

  </span>
        </center>
      </footer>
    </div><!-- /.footer-wrapper -->
    

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-707704-1', 'elitmus.com');
	  ga('send', 'pageview');
	</script>



<!-- Load Modernizr -->
<script src="/blog/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- adding jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- end of jquery -->

<script src="/blog/assets/js/scripts.min.js"></script>
<script src="/blog/assets/js/lunr.min.js"></script>
<script src="/blog/assets/js/lunr-search.js"></script>
<script src="/blog/assets/js/plugins/headroom.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="/blog/assets/js/vendor/forkit.js"></script>
  

  </body>
</html>
